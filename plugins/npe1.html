
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1st Gen Plugin Guide (Deprecated) &#8212; napari</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Community" href="../community/index.html" />
    <link rel="prev" title="npe2 migration guide" href="npe2_migration_guide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/logo.png" class="logo" alt="logo">
</a>


    
    <!-- A small template snippet for theme testing -->
<b>napari</b>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Plugins
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../community/index.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://napari-hub.org">napari hub<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/napari/napari" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="find_and_install_plugin.html">
   Finding and installing a napari plugin
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="first_plugin.html">
   Your First Plugin
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="manifest.html">
   Manifest Reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributions.html">
   Contributions Reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="guides.html">
   Contribution Guides
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="test_deploy.html">
   Test and Deploy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="best_practices.html">
   Best practices
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="npe2_migration_guide.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     npe2
    </span>
   </code>
   migration guide
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   1st Gen Plugin Guide (
   <em>
    Deprecated
   </em>
   )
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-choose-a-hook-specification-to-implement">
     Step 1: Choose a hook specification to implement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-write-your-hook-implementation">
     Step 2: Write your hook implementation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#decorating-your-function-with-hookimplementationmarker">
       Decorating your function with
       <code class="docutils literal notranslate">
        <span class="pre">
         HookImplementationMarker
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#matching-hook-implementations-to-specifications">
         Matching hook implementations to specifications
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-make-your-plugin-discoverable">
     Step 3: Make your plugin discoverable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-deploy-your-plugin">
     Step 4: Deploy your plugin
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cookiecutter-template">
   Cookiecutter template
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hook-specification-reference">
   Hook Specification Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#io-hooks">
     IO hooks
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#single-layers-io">
       Single Layers IO
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analysis-hooks">
     Analysis hooks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gui-hooks">
     GUI hooks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#help">
   Help
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="st-gen-plugin-guide-deprecated">
<span id="napari-plugin-engine"></span><h1>1st Gen Plugin Guide (<em>Deprecated</em>)<a class="headerlink" href="#st-gen-plugin-guide-deprecated" title="Permalink to this headline">¶</a></h1>
<div class="warning admonition">
<p class="admonition-title">DEPRECATED</p>
<p>We introduced a new plugin engine (<a class="reference external" href="https://github.com/napari/npe2"><code class="docutils literal notranslate"><span class="pre">npe2</span></code></a>) in December 2021.</p>
<p>Plugins targeting the first generation <code class="docutils literal notranslate"><span class="pre">napari-plugin-engine</span></code>
(described on this page) will continue to work for at least the
first half of 2022, but we recommend that new plugins use <code class="docutils literal notranslate"><span class="pre">npe2</span></code> and
existing plugins consider migrating soon. See the
<a class="reference internal" href="npe2_migration_guide.html#npe2-migration-guide"><span class="std std-ref">npe2 migration guide</span></a> for details.</p>
<p>The content below describes the original
<a class="reference external" href="https://github.com/napari/napari-plugin-engine"><code class="docutils literal notranslate"><span class="pre">napari-plugin-engine</span></code></a>
and exists for archival reference purposes during the deprecation period.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">napari</span></code> supports plugin development through <strong>hooks</strong>:
specific places in the napari codebase where functionality can be extended.</p>
<ol class="simple">
<li><p><strong>Hook specifications</strong>: The available hooks are declared as
“<em>hook specifications</em>”: function signatures that define the API (or
“contract”) that a plugin developer must adhere to when writing their function
that we promise to call somewhere in the napari codebase.
See <a class="reference internal" href="#plugins-hook-spec"><span class="std std-ref">Step 1: Choose a hook specification to implement</span></a>.</p></li>
<li><p><strong>Hook implementations</strong>: To make a plugin, plugin developers then write functions (“<em>hook
implementations</em>”) and mark that function as meeting the requirements of a
specific <em>hook specification</em> offered by napari.
See <a class="reference internal" href="#plugins-hook-implement"><span class="std std-ref">Step 2: Write your hook implementation</span></a>.</p></li>
<li><p><strong>Plugin discovery</strong>: Plugins that are installed in the same python
environment as napari can make themselves known to napari. <code class="docutils literal notranslate"><span class="pre">napari</span></code> will then
scan plugin modules for <em>hook implementations</em> that will be called at the
appropriate time and place during the execution of <code class="docutils literal notranslate"><span class="pre">napari</span></code>.
See <a class="reference internal" href="#plugin-discovery"><span class="std std-ref">Step 3: Make your plugin discoverable</span></a>.</p></li>
<li><p><strong>Plugin sharing</strong>: When you are ready to share your plugin, tag your repo
with <code class="docutils literal notranslate"><span class="pre">napari-plugin</span></code>, push a release to pypi, and announce it on Image.sc.
Your plugin will then be available for users on the
<a class="reference external" href="https://napari-hub.org/">napari hub</a>. See <a class="reference internal" href="#plugin-sharing"><span class="std std-ref">Step 4: Deploy your plugin</span></a>.</p></li>
</ol>
<div class="section" id="step-1-choose-a-hook-specification-to-implement">
<span id="plugins-hook-spec"></span><h3>Step 1: Choose a hook specification to implement<a class="headerlink" href="#step-1-choose-a-hook-specification-to-implement" title="Permalink to this headline">¶</a></h3>
<p>The functionality of plugins, as currently designed and implemented in
<code class="docutils literal notranslate"><span class="pre">napari</span></code>, is rather specific in scope: They are <em>not</em> just independent code
blocks with their own GUIs that show up next to the main napari window. Rather,
plugin developers must decide which of the current <em>hook specifications</em>
defined by napari they would like to implement.</p>
<p>For a complete list of <em>hook specifications</em> that developers can implement, see
the <a class="reference internal" href="#hook-specifications-reference"><span class="std std-ref">Hook Specification Reference</span></a>.</p>
<p>A single plugin package may implement more than one <em>hook specification</em>, and
each <em>hook specification</em> could have multiple <em>hook implementations</em> within
a single package.</p>
<p>Let’s take the <a class="reference internal" href="#napari.plugins.hook_specifications.napari_get_reader" title="napari.plugins.hook_specifications.napari_get_reader"><code class="xref py py-func docutils literal notranslate"><span class="pre">napari_get_reader()</span></code></a>
hook (our primary “reader plugin” hook) as an example. It is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">LayerData</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
   <span class="n">ReaderFunction</span> <span class="o">=</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">LayerData</span><span class="p">]]</span>

   <span class="nd">@napari_hook_specification</span><span class="p">(</span><span class="n">firstresult</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
   <span class="k">def</span> <span class="nf">napari_get_reader</span><span class="p">(</span>
       <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
   <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReaderFunction</span><span class="p">]:</span>
       <span class="o">...</span>
</pre></div>
</div>
<p>Note that it takes a <code class="docutils literal notranslate"><span class="pre">str</span></code> or a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code> and either returns
<code class="docutils literal notranslate"><span class="pre">None</span></code> or a function. From the <a class="reference internal" href="#napari.plugins.hook_specifications.napari_get_reader" title="napari.plugins.hook_specifications.napari_get_reader"><code class="xref py py-func docutils literal notranslate"><span class="pre">docstring</span></code></a> of the hook
specification, we see that the implementation should return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the
path is of an unrecognized format, otherwise it should return a
<code class="docutils literal notranslate"><span class="pre">ReaderFunction</span></code>, which is a function that takes a <code class="docutils literal notranslate"><span class="pre">str</span></code> (the filepath to
read) and returns a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">LayerData</span></code>, where <code class="docutils literal notranslate"><span class="pre">LayerData</span></code> is any one
of <code class="docutils literal notranslate"><span class="pre">(data,)</span></code>, <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta)</span></code>, or <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta,</span> <span class="pre">layer_type)</span></code>.</p>
<p>That seems like a bit of a mouthful! But it’s a precise (though flexible)
contract that you can follow, and know that napari will handle the rest.</p>
</div>
<div class="section" id="step-2-write-your-hook-implementation">
<span id="plugins-hook-implement"></span><h3>Step 2: Write your hook implementation<a class="headerlink" href="#step-2-write-your-hook-implementation" title="Permalink to this headline">¶</a></h3>
<p>Once you have identified the <a class="reference internal" href="#hook-specifications-reference"><span class="std std-ref">hook specification</span></a> that you want to implement, you have to create
a <em>hook implementation</em>: a function that accepts the arguments specified by the
hook specification signature and returns a value with the expected return type.</p>
<p>Here’s an example hook implementation for
<a class="reference internal" href="#napari.plugins.hook_specifications.napari_get_reader" title="napari.plugins.hook_specifications.napari_get_reader"><code class="xref py py-func docutils literal notranslate"><span class="pre">napari_get_reader()</span></code></a> that enables
napari to open a numpy binary file with a <code class="docutils literal notranslate"><span class="pre">.npy</span></code> extension (previously saved
with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.save.html#numpy.save" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.save()</span></code></a>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
   <span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>

   <span class="k">def</span> <span class="nf">npy_file_reader</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
      <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="c1"># return it as a list of LayerData tuples,</span>
      <span class="c1"># here with no optional metadata</span>
      <span class="k">return</span> <span class="p">[(</span><span class="n">array</span><span class="p">,)]</span>

   <span class="c1"># this line is explained below in &quot;Decorating your function...&quot;</span>
   <span class="nd">@napari_hook_implementation</span>
   <span class="k">def</span> <span class="nf">napari_get_reader</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
      <span class="c1"># remember, path can be a list, so we check its type first...</span>
      <span class="c1"># (this example plugin doesn&#39;t handle lists)</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.npy&quot;</span><span class="p">):</span>
         <span class="c1"># If we recognize the format, we return the actual reader function</span>
         <span class="k">return</span> <span class="n">npy_file_reader</span>
      <span class="c1"># otherwise we return None.</span>
      <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<div class="section" id="decorating-your-function-with-hookimplementationmarker">
<span id="hookimplementation-decorator"></span><h4>Decorating your function with <code class="docutils literal notranslate"><span class="pre">HookImplementationMarker</span></code><a class="headerlink" href="#decorating-your-function-with-hookimplementationmarker" title="Permalink to this headline">¶</a></h4>
<p>In order to let <code class="docutils literal notranslate"><span class="pre">napari</span></code> know that one of your functions satisfies the API of
one of the napari <em>hook specifications</em>, you must decorate your function with
an instance of <a class="reference external" href="https://napari-plugin-engine.readthedocs.io/en/latest/api.html#napari_plugin_engine.HookImplementationMarker" title="(in napari-plugin-engine)"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookImplementationMarker</span></code></a>,
initialized with the name <code class="docutils literal notranslate"><span class="pre">&quot;napari&quot;</span></code>. As a convenience, napari provides this
decorator at <code class="docutils literal notranslate"><span class="pre">napari_plugin_engine.napari_hook_implementation</span></code> as shown in
the example above.</p>
<p>However, it’s not required to import from or depend on napari <em>at all</em> when
writing a plugin. You can import a <code class="docutils literal notranslate"><span class="pre">napari_hook_implementation</span></code> decorator
directly from <code class="docutils literal notranslate"><span class="pre">napari_plugin_engine</span></code> (a very lightweight dependency that uses
only standard lib python).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
</pre></div>
</div>
<div class="section" id="matching-hook-implementations-to-specifications">
<h5>Matching hook implementations to specifications<a class="headerlink" href="#matching-hook-implementations-to-specifications" title="Permalink to this headline">¶</a></h5>
<p>By default, <code class="docutils literal notranslate"><span class="pre">napari</span></code> matches your implementation to one of our hook
specifications by looking at the <em>name</em> of your decorated function. So in the
example above, because the hook implementation was literally
named <code class="docutils literal notranslate"><span class="pre">napari_get_reader</span></code>, it gets interpreted as an implementation for the
hook specification of the same name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="nd">@napari_hook_implementation</span>
   <span class="k">def</span> <span class="nf">napari_get_reader</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
      <span class="o">...</span>
</pre></div>
</div>
<p>However, you may also mark <em>any</em> function as satisfying a particular napari
hook specification (regardless of the function’s name) by providing the name of
the target hook specification to the <code class="docutils literal notranslate"><span class="pre">specname</span></code> argument in your
implementation decorator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="nd">@napari_hook_implementation</span><span class="p">(</span><span class="n">specname</span><span class="o">=</span><span class="s2">&quot;napari_get_reader&quot;</span><span class="p">)</span>
   <span class="k">def</span> <span class="nf">whatever_name_you_want</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
      <span class="o">...</span>
</pre></div>
</div>
<p>This allows you to specify multiple hook implementations of the same hook
specification in the same module or class, without needing a separate entry point.</p>
</div>
</div>
</div>
<div class="section" id="step-3-make-your-plugin-discoverable">
<span id="plugin-discovery"></span><h3>Step 3: Make your plugin discoverable<a class="headerlink" href="#step-3-make-your-plugin-discoverable" title="Permalink to this headline">¶</a></h3>
<p>Packages and modules installed in the same environment as <code class="docutils literal notranslate"><span class="pre">napari</span></code> may make
themselves “discoverable” to napari using package metadata, as outlined in the
<a class="reference external" href="https://packaging.python.org/guides/creating-and-discovering-plugins/#using-package-metadata">Python Packaging Authority guide</a>.</p>
<p>By providing an <code class="docutils literal notranslate"><span class="pre">entry_points</span></code> argument with the key <code class="docutils literal notranslate"><span class="pre">napari.plugin</span></code> to
<code class="docutils literal notranslate"><span class="pre">setup()</span></code> in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, plugins can register themselves for discovery.</p>
<p>For example if you have a package named <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> with a submodule
<code class="docutils literal notranslate"><span class="pre">napari_plugin</span></code> where you have decorated one or more napari hook
implementations, then if you include in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="c1"># setup.py</span>

   <span class="n">setup</span><span class="p">(</span>
      <span class="o">...</span>
      <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;napari.plugin&#39;</span><span class="p">:</span> <span class="s1">&#39;plugin-name = mypackage.napari_plugin&#39;</span><span class="p">},</span>
      <span class="o">...</span>
   <span class="p">)</span>
</pre></div>
</div>
<p>… then napari will search the <code class="docutils literal notranslate"><span class="pre">mypackage.napari_plugin</span></code> module for
functions decorated with the <code class="docutils literal notranslate"><span class="pre">HookImplementationMarker(&quot;napari&quot;)</span></code> decorator
and register them under the plugin name <code class="docutils literal notranslate"><span class="pre">&quot;plugin-name&quot;</span></code>.</p>
<p>A user would then be able to use <code class="docutils literal notranslate"><span class="pre">napari</span></code>, extended with your package’s
functionality by simply installing your package along with napari:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>   pip install napari mypackage
</pre></div>
</div>
</div>
<div class="section" id="step-4-deploy-your-plugin">
<span id="plugin-sharing"></span><h3>Step 4: Deploy your plugin<a class="headerlink" href="#step-4-deploy-your-plugin" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="test_deploy.html"><span class="doc std std-doc">testing and deploying</span></a> your plugin.  (This hasn’t changed
significantly with the secod generation (<code class="docutils literal notranslate"><span class="pre">npe2</span></code>) plugin engine).</p>
</div>
</div>
<div class="section" id="cookiecutter-template">
<span id="plugin-cookiecutter-template"></span><h2>Cookiecutter template<a class="headerlink" href="#cookiecutter-template" title="Permalink to this headline">¶</a></h2>
<p>To quickly generate a new napari plugin project, you may wish to use the
<a class="reference external" href="https://github.com/napari/cookiecutter-napari-plugin">cookiecutter-napari-plugin</a> template. This uses
the <a class="reference external" href="https://github.com/cookiecutter/cookiecutter">cookiecutter</a> command line
utility, which will ask you a few questions about your project and get you
started with a ready-to-go package layout where you can begin implementing your
plugin.</p>
<p>Install cookiecutter and use the template as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip install cookiecutter
cookiecutter https://github.com/napari/cookiecutter-napari-plugin
</pre></div>
</div>
<p>See the <a class="reference external" href="https://github.com/napari/cookiecutter-napari-plugin">readme</a> for details</p>
<hr class="docutils" />
</div>
<div class="section" id="hook-specification-reference">
<span id="hook-specifications-reference"></span><h2>Hook Specification Reference<a class="headerlink" href="#hook-specification-reference" title="Permalink to this headline">¶</a></h2>
<p>All napari hook specifications for pluggable functionality are defined here.</p>
<p>A <em>hook specification</em> is a function signature (with documentation) that
declares an API that plugin developers must adhere to when providing hook
implementations.  <em>Hook implementations</em> provided by plugins (and internally by
napari) will then be invoked in various places throughout the code base.</p>
<p>When implementing a hook specification, pay particular attention to the number
and types of the arguments in the specification signature, as well as the
expected return type.</p>
<p>To allow for hook specifications to evolve over the lifetime of napari,
hook implementations may accept <em>fewer</em> arguments than defined in the
specification. (This allows for extending existing hook arguments without
breaking existing implementations). However, implementations must not require
<em>more</em> arguments than defined in the spec.</p>
<p>For more general background on the plugin hook calling mechanism, see the
<a class="reference external" href="https://napari-plugin-engine.readthedocs.io/en/latest/">napari-plugin-manager documentation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hook specifications are a feature borrowed from <a class="reference external" href="https://pluggy.readthedocs.io/en/latest/#specs">pluggy</a>. In the <a class="reference external" href="https://pluggy.readthedocs.io/en/latest/">pluggy
documentation</a>, hook
specification marker instances are named <code class="docutils literal notranslate"><span class="pre">hookspec</span></code> by convention, and
hook implementation marker instances are named <code class="docutils literal notranslate"><span class="pre">hookimpl</span></code>.  The
convention in napari is to name them more explicitly:
<code class="docutils literal notranslate"><span class="pre">napari_hook_specification</span></code> and <code class="docutils literal notranslate"><span class="pre">napari_hook_implementation</span></code>,
respectively.</p>
</div>
<div class="section" id="io-hooks">
<h3>IO hooks<a class="headerlink" href="#io-hooks" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_provide_sample_data">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_provide_sample_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../api/napari.types.Path.html#napari.types.Path" title="pathlib.Path"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.10)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../api/napari.types.SampleDict.html#napari.types.SampleDict" title="napari.types.SampleDict"><span class="pre">napari.types.SampleDict</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_provide_sample_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_provide_sample_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide sample data.</p>
<p>Plugins may implement this hook to provide sample data for use in napari.
Sample data is accessible in the <cite>File &gt; Open Sample</cite> menu, or
programmatically, with <a class="reference internal" href="../api/napari.Viewer.html#napari.Viewer.open_sample" title="napari.Viewer.open_sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">napari.Viewer.open_sample()</span></code></a>.</p>
<p>Plugins implementing this hook specification must return a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, where
each key is a <cite>sample_key</cite> (the string that will appear in the
<cite>Open Sample</cite> menu), and the value is either a string, or
a callable that returns an iterable of <code class="docutils literal notranslate"><span class="pre">LayerData</span></code> tuples, where each
tuple is a 1-, 2-, or 3-tuple of <code class="docutils literal notranslate"><span class="pre">(data,)</span></code>, <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta)</span></code>, or <code class="docutils literal notranslate"><span class="pre">(data,</span>
<span class="pre">meta,</span> <span class="pre">layer_type)</span></code> (thus, an individual sample-loader may provide multiple
layers).  If the value is a string, it will be opened with
<a class="reference internal" href="../api/napari.Viewer.html#napari.Viewer.open" title="napari.Viewer.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">napari.Viewer.open()</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Here’s a minimal example of a plugin that provides three samples:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>random data from numpy</p></li>
<li><p>a random image pulled from the internet</p></li>
<li><dl class="simple">
<dt>random data from numpy, provided as a dict with the keys:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>‘display_name’: a string that will show in the menu (by default,</dt><dd><p>the <cite>sample_key</cite> will be shown)</p>
</dd>
</dl>
</li>
<li><p>‘data’: a string or callable, as in 1/2.</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>

<span class="k">def</span> <span class="nf">_generate_random_data</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">)):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">*</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">data</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;random data&#39;</span><span class="p">})]</span>

<span class="nd">@napari_hook_implementation</span>
<span class="k">def</span> <span class="nf">napari_provide_sample_data</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;random data&#39;</span><span class="p">:</span> <span class="n">_generate_random_data</span><span class="p">,</span>
        <span class="s1">&#39;random image&#39;</span><span class="p">:</span> <span class="s1">&#39;https://picsum.photos/1024&#39;</span><span class="p">,</span>
        <span class="s1">&#39;sample_key&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Some Random Data (512 x 512)&#39;</span>
            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">_generate_random_data</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A mapping of <cite>sample_key</cite> to <cite>data_loader</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[ <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Callable[…, Iterable[LayerData]]] ]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_get_reader">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_get_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.10)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_get_reader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_get_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function capable of loading <code class="docutils literal notranslate"><span class="pre">path</span></code> into napari, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is the primary “<strong>reader plugin</strong>” function.  It accepts a path or
list of paths, and returns a list of data to be added to the <code class="docutils literal notranslate"><span class="pre">Viewer</span></code>.
The function may return <code class="docutils literal notranslate"><span class="pre">[(None,</span> <span class="pre">)]</span></code> to indicate that the file was read
successfully, but did not contain any data.</p>
<p>The main place this hook is used is in <code class="xref py py-func docutils literal notranslate"><span class="pre">Viewer.open()</span></code>, via the
<code class="xref py py-func docutils literal notranslate"><span class="pre">read_data_with_plugins()</span></code> function.</p>
<p>It will also be called on <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">Open...</span></code> or when a user drops a file
or folder onto the viewer. This function must execute <strong>quickly</strong>, and
should return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the filepath is of an unrecognized format for
this reader plugin.  If <code class="docutils literal notranslate"><span class="pre">path</span></code> is determined to be recognized format,
this function should return a <em>new</em> function that accepts the same filepath
(or list of paths), and returns a list of <code class="docutils literal notranslate"><span class="pre">LayerData</span></code> tuples, where each
tuple is a 1-, 2-, or 3-tuple of <code class="docutils literal notranslate"><span class="pre">(data,)</span></code>, <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta)</span></code>, or <code class="docutils literal notranslate"><span class="pre">(data,</span>
<span class="pre">meta,</span> <span class="pre">layer_type)</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">napari</span></code> will then use each tuple in the returned list to generate a new
layer in the viewer using the <code class="xref py py-func docutils literal notranslate"><span class="pre">Viewer._add_layer_from_data()</span></code>
method.  The first, (optional) second, and (optional) third items in each
tuple in the returned layer_data list, therefore correspond to the
<code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">meta</span></code>, and <code class="docutils literal notranslate"><span class="pre">layer_type</span></code> arguments of the
<code class="xref py py-func docutils literal notranslate"><span class="pre">Viewer._add_layer_from_data()</span></code>
method, respectively.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> may be either a <code class="docutils literal notranslate"><span class="pre">str</span></code> or a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">str</span></code>.  If a
<code class="docutils literal notranslate"><span class="pre">list</span></code>, then each path in the list can be assumed to be one part of a
larger multi-dimensional stack (for instance: a list of 2D image files
that should be stacked along a third axis). Implementations should do
their own checking for <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code>, and handle each case as
desired.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>list of str</em>) – Path to file, directory, or resource (like a URL), or a list of paths.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function that accepts the path, and returns a list of <code class="docutils literal notranslate"><span class="pre">layer_data</span></code>,
where <code class="docutils literal notranslate"><span class="pre">layer_data</span></code> is one of <code class="docutils literal notranslate"><span class="pre">(data,)</span></code>, <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta)</span></code>, or
<code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta,</span> <span class="pre">layer_type)</span></code>.
If unable to read the path, must return <code class="docutils literal notranslate"><span class="pre">None</span></code> (not <code class="docutils literal notranslate"><span class="pre">False</span></code>!).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_get_writer">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_get_writer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.10)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_get_writer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_get_writer" title="Permalink to this definition">¶</a></dt>
<dd><p>Return function capable of writing napari layer data to <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<p>This function will be called whenever the user attempts to save multiple
layers (e.g. via <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">Save</span> <span class="pre">Layers</span></code>, or
<code class="xref py py-func docutils literal notranslate"><span class="pre">save_layers()</span></code>).
This function must execute <strong>quickly</strong>, and should return <code class="docutils literal notranslate"><span class="pre">None</span></code> if
<code class="docutils literal notranslate"><span class="pre">path</span></code> has an unrecognized extension for the reader plugin or the list of
layer types are incompatible with what the plugin can write. If <code class="docutils literal notranslate"><span class="pre">path</span></code> is
a recognized format, this function should return a <em>function</em> that accepts
the same <code class="docutils literal notranslate"><span class="pre">path</span></code>, and a list of tuples containing the data for each layer
being saved in the form of <code class="docutils literal notranslate"><span class="pre">(Layer.data,</span> <span class="pre">Layer._get_state(),</span>
<span class="pre">Layer._type_string)</span></code>. The writer function should return a list of strings
(the actual filepath(s) that were written).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is up to plugins to inspect and obey any extension in <code class="docutils literal notranslate"><span class="pre">path</span></code>
(and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension).</p>
</div>
<p>An example function signature for a <code class="docutils literal notranslate"><span class="pre">WriterFunction</span></code> that might be
returned by this hook specification is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">writer_function</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">layer_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).  Any extensions in
the path should be examined and obeyed.  (i.e. if the plugin is
incapable of returning a requested extension, it should return
<code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>layer_types</strong> (<em>list of str</em>) – List of layer types (e.g. “image”, “labels”) that will be provided to
the writer function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function that accepts the path, a list of layer_data (where
layer_data is <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">meta,</span> <span class="pre">layer_type)</span></code>). If unable to write to the
path or write the layer_data, must return <code class="docutils literal notranslate"><span class="pre">None</span></code> (not <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable or None</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="single-layers-io">
<span id="write-single-layer-hookspecs"></span><h4>Single Layers IO<a class="headerlink" href="#single-layers-io" title="Permalink to this headline">¶</a></h4>
<p>The following hook specifications will be called when a user saves a single
layer in napari, and should save the layer to the requested format and return
the save path if the data are successfully written. Otherwise, if nothing was saved, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.
They each accept a <code class="docutils literal notranslate"><span class="pre">path</span></code>.
It is up to plugins to inspect and obey the extension of the path (and return
<code class="docutils literal notranslate"><span class="pre">False</span></code> if it is an unsupported extension). The <code class="docutils literal notranslate"><span class="pre">data</span></code> argument will come
from <code class="docutils literal notranslate"><span class="pre">Layer.data</span></code>, and a <code class="docutils literal notranslate"><span class="pre">meta</span></code> dict that will correspond to the layer’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">_get_state()</span></code> method.</p>
<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_image">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Write image data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<em>array</em><em> or </em><em>list of array</em>) – Image data. Can be N dimensional. If meta[‘rgb’] is <code class="docutils literal notranslate"><span class="pre">True</span></code> then the
data should be interpreted as RGB or RGBA. If meta[‘multiscale’] is
True, then the data should be interpreted as a multiscale image.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Image metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_labels">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Write labels data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<em>array</em><em> or </em><em>list of array</em>) – Integer valued label data. Can be N dimensional. Every pixel contains
an integer ID corresponding to the region it belongs to. The label 0 is
rendered as transparent. If a list and arrays are decreasing in shape
then the data is from a multiscale image.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Labels metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_points">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Write points data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<em>array</em><em> (</em><em>N</em><em>, </em><em>D</em><em>)</em>) – Coordinates for N points in D dimensions.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Points metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_shapes">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_shapes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_shapes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_shapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Write shapes data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – List of shape data, where each element is an (N, D) array of the
N vertices of a shape in D dimensions.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Shapes metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_surface">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_surface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Write surface data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<em>3-tuple of array</em>) – The first element of the tuple is an (N, D) array of vertices of
mesh triangles. The second is an (M, 3) array of int of indices
of the mesh triangles. The third element is the (K0, …, KL, N)
array of values used to color vertices where the additional L
dimensions are used to color the same mesh with different values.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Surface metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_write_vectors">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_write_vectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_write_vectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_write_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Write vectors data and metadata into a path.</p>
<p>It is the responsibility of the implementation to check any extension on
<code class="docutils literal notranslate"><span class="pre">path</span></code> and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it is an unsupported extension.  If
<code class="docutils literal notranslate"><span class="pre">path</span></code> has no extension, implementations may append their preferred
extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file, directory, or resource (like a URL).</p></li>
<li><p><strong>data</strong> (<em>(</em><em>N</em><em>, </em><em>2</em><em>, </em><em>D</em><em>) </em><em>array</em>) – The start point and projections of N vectors in D dimensions.</p></li>
<li><p><strong>meta</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Vectors metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – If data is successfully written, return the <code class="docutils literal notranslate"><span class="pre">path</span></code> that was written.
Otherwise, if nothing was done, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="analysis-hooks">
<h3>Analysis hooks<a class="headerlink" href="#analysis-hooks" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_experimental_provide_function">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_experimental_provide_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><span class="pre">function</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><span class="pre">function</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_experimental_provide_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_experimental_provide_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide function(s) that can be passed to magicgui.</p>
<p>This hook specification is marked as experimental as the API or how the
returned value is handled may change here more frequently then the
rest of the codebase.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>function(s)</strong> – Implementations should provide either a single function, or a list of
functions. Note that this does not preclude specifying multiple
separate implementations in the same module or class.
The functions should have Python type annotations so that
<a class="reference external" href="https://napari.org/magicgui">magicgui</a> can generate a widget from
them.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>FunctionType or list of FunctionType</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">napari.types</span> <span class="kn">import</span> <span class="n">ImageData</span><span class="p">,</span> <span class="n">LayerDataTuple</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">image</span> <span class="p">:</span> <span class="n">ImageData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LayerDataTuple</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># process the image</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="n">image</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># return it + some layer properties</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;colormap&#39;</span><span class="p">:</span><span class="s1">&#39;turbo&#39;</span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@napari_hook_implementation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">napari_experimental_provide_function</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">my_function</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gui-hooks">
<h3>GUI hooks<a class="headerlink" href="#gui-hooks" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_experimental_provide_theme">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_experimental_provide_theme</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_experimental_provide_theme"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_experimental_provide_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide GUI with a set of colors used through napari. This hook allows you to
provide additional color schemes so you can accomplish your desired styling.</p>
<p>Themes are provided as <cite>dict</cite> with several required fields and correctly formatted
color values. Colors can be specified using color names (e.g. <code class="docutils literal notranslate"><span class="pre">white</span></code>), hex color
(e.g. <code class="docutils literal notranslate"><span class="pre">#ff5733</span></code>), rgb color in 0-255 range (e.g. <code class="docutils literal notranslate"><span class="pre">rgb(255,</span> <span class="pre">0,</span> <span class="pre">127)</span></code> or as
3- or 4-element tuples or lists (e.g. <code class="docutils literal notranslate"><span class="pre">(255,</span> <span class="pre">0,</span> <span class="pre">127)</span></code>. The <cite>Theme</cite> model will
automatically handle the conversion.</p>
<p>See <code class="xref py py-class docutils literal notranslate"><span class="pre">Theme</span></code> for more detail of what are the required keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>themes</strong> – Sequence of dictionaries containing new color schemes to be used by napari.
You can replace existing themes by using the same names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Tuple, List]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_new_theme</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">]]:</span>
<span class="gp">... </span>    <span class="c1"># specify theme(s) that should be added to napari</span>
<span class="gp">... </span>    <span class="n">themes</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;super_dark&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;super_dark&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;background&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(12, 12, 12)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;foreground&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(65, 72, 81)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;primary&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(90, 98, 108)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;secondary&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(134, 142, 147)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;highlight&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(106, 115, 128)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(240, 241, 242)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(209, 210, 212)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(153, 18, 31)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;current&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(0, 122, 204)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;syntax_style&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;console&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb(0, 0, 0)&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;canvas&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">themes</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@napari_hook_implementation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">napari_experimental_provide_theme</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">get_new_theme</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="napari.plugins.hook_specifications.napari_experimental_provide_dock_widget">
<span class="sig-prename descclassname"><span class="pre">napari.plugins.hook_specifications.</span></span><span class="sig-name descname"><span class="pre">napari_experimental_provide_dock_widget</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">AugmentedWidget</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">AugmentedWidget</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/napari/plugins/hook_specifications.html#napari_experimental_provide_dock_widget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#napari.plugins.hook_specifications.napari_experimental_provide_dock_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide functions that return widgets to be docked in the viewer.</p>
<p>This hook specification is marked as experimental as the API or how the
returned value is handled may change here more frequently then the
rest of the codebase.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p><strong>result</strong> – A “callable” in this context is a class or function that, when
called, returns an instance of either a
<code class="xref py py-class docutils literal notranslate"><span class="pre">QWidget</span></code> or a
<a class="reference external" href="https://napari.org/magicgui/usage/_autosummary/magicgui.widgets.FunctionGui.html#magicgui.widgets.FunctionGui" title="(in Python)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionGui</span></code></a>.</p>
<p>Implementations of this hook specification must return a callable, or a
tuple of <code class="docutils literal notranslate"><span class="pre">(callable,</span> <span class="pre">dict)</span></code>, where the dict contains keyword
arguments for <code class="xref py py-meth docutils literal notranslate"><span class="pre">napari.qt.Window.add_dock_widget()</span></code>. (note, however,
that <code class="docutils literal notranslate"><span class="pre">shortcut=</span></code> keyword is not yet supported).</p>
<p>Implementations may also return a list, in which each item must be a
callable or <code class="docutils literal notranslate"><span class="pre">(callable,</span> <span class="pre">dict)</span></code> tuple. Note that this does not
preclude specifying multiple separate implementations in the same module
or class.</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>callable or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a> or list of callables or list of tuples</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>An example with a QtWidget:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">napari_viewer</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="n">napari_viewer</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># initialize layout</span>
<span class="gp">... </span>        <span class="n">layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># add a button</span>
<span class="gp">... </span>        <span class="n">btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Click me!&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="nf">trigger</span><span class="p">():</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;napari has&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">napari_viewer</span><span class="o">.</span><span class="n">layers</span><span class="p">),</span> <span class="s2">&quot;layers&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">trigger</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># activate layout</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@napari_hook_implementation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">MyWidget</span>
</pre></div>
</div>
<p>An example using magicgui:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">magicgui</span> <span class="kn">import</span> <span class="n">magic_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@magic_factory</span><span class="p">(</span><span class="n">auto_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">16</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">threshold</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">:</span> <span class="s1">&#39;napari.types.ImageData&#39;</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">... </span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;napari.types.LabelsData&#39;</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@napari_hook_implementation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">threshold</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="help">
<h2>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h2>
<p>If you run into trouble creating your plugin, please don’t hesitate to reach
out for help in the <a class="reference external" href="https://forum.image.sc/tag/napari">Image.sc Forum</a>.
Alternatively, if you find a bug or have a specific feature request for plugin
support, please open an issue at our <a class="reference external" href="https://github.com/napari/napari/issues/new/choose">GitHub issue tracker</a>.</p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="npe2_migration_guide.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">npe2</span></code> migration guide</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../community/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Community</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The napari team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>