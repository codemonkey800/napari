
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Benchmarks &#8212; napari</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing guide" href="contributing.html" />
    <link rel="prev" title="Contributing resources" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/logo.png" class="logo" alt="logo">
</a>


    
    <!-- A small template snippet for theme testing -->
<b>napari</b>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../plugins/index.html">
  Plugins
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../community/index.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://napari-hub.org">napari hub<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/napari/napari" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../community/mission_and_values.html">
   Mission and Values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/team.html">
   About the project and team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/code_of_conduct.html">
   Code of Conduct
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/code_of_conduct_reporting.html">
   Handling Code of Conduct reports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/governance.html">
   Governance model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/working_groups.html">
   Working groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/meeting_schedule.html">
   Meeting schedule
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Contributing resources
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Benchmarks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="contributing.html">
     Contributing guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="core_dev_guide.html">
     Core Developer guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="profiling.html">
     Profiling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="release.html">
     Release guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="testing.html">
     Testing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="docs.html">
     Organization of Documentation for napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="translations.html">
     Translations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../release/index.html">
   Release notes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_14.html">
     napari 0.4.14
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_13.html">
     napari 0.4.13
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_12.html">
     napari 0.4.12
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_11.html">
     napari 0.4.11
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_10.html">
     napari 0.4.10
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_9.html">
     napari 0.4.9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_8.html">
     napari 0.4.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_7.html">
     napari 0.4.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_6.html">
     napari 0.4.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_5.html">
     napari 0.4.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_4.html">
     napari 0.4.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_3.html">
     napari 0.4.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_2.html">
     napari 0.4.2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_1.html">
     napari 0.4.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_0.html">
     napari 0.4.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_8.html">
     napari 0.3.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_7.html">
     napari 0.3.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_6.html">
     napari 0.3.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_5.html">
     napari 0.3.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_4.html">
     napari 0.3.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_3.html">
     napari 0.3.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_2.html">
     napari 0.3.2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_1.html">
     napari 0.3.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_0.html">
     napari 0.3.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_12.html">
     napari 0.2.12
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_11.html">
     napari 0.2.11
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_10.html">
     napari 0.2.10
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_9.html">
     napari 0.2.9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_8.html">
     napari 0.2.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_7.html">
     napari 0.2.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_6.html">
     napari 0.2.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_5.html">
     napari 0.2.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_4.html">
     napari 0.2.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_3.html">
     napari 0.2.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_1.html">
     napari 0.2.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_0.html">
     napari 0.2.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_5.html">
     napari 0.1.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_3.html">
     napari 0.1.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_0.html">
     napari 0.1.0
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../roadmaps/index.html">
   Roadmaps
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_4.html">
     Roadmap 0.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_3_retrospective.html">
     Roadmap 0.3 Retrospective
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_3.html">
     Roadmap 0.3
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequisites">
   Prerequisites
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-a-benchmark">
   Writing a benchmark
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-the-benchmarks-locally">
   Testing the benchmarks locally
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-your-benchmark">
   Running your benchmark
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparing-results-to-main">
   Comparing results to main
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#profiling">
   Profiling
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="benchmarks">
<span id="napari-benchmarks"></span><h1>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this headline">¶</a></h1>
<p>While not mandatory for most pull requests, we ask that performance related
PRs include a benchmark in order to clearly depict the use-case that is being
optimized for.</p>
<p>In this section we will review how to setup the benchmarks,
and three commands <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">dev</span></code>, <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">continuous</span></code>.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Begin by installing <a class="reference external" href="https://asv.readthedocs.io/en/stable/">airspeed velocity</a>
in your development environment. Prior to installation, be sure to activate your
development environment, then if using <code class="docutils literal notranslate"><span class="pre">venv</span></code> you may install the requirement with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> napari-dev/bin/activate
pip install asv
</pre></div>
</div>
<p>If you are using conda, then the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate napari-dev
conda install asv
</pre></div>
</div>
<p>is more appropriate. Once installed, it is useful to run the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv machine
</pre></div>
</div>
<p>To let airspeed velocity know more information about your machine.</p>
</div>
<div class="section" id="writing-a-benchmark">
<h2>Writing a benchmark<a class="headerlink" href="#writing-a-benchmark" title="Permalink to this headline">¶</a></h2>
<p>To write  benchmark, add a file in the <code class="docutils literal notranslate"><span class="pre">napari/_benchmarks</span></code> directory which
contains a class with one <code class="docutils literal notranslate"><span class="pre">setup</span></code> method and at least one method prefixed
with <code class="docutils literal notranslate"><span class="pre">time_</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">time_</span></code> method should only contain code you wish to benchmark.
Therefore it is useful to move everything that prepares the benchmark scenario
into the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method. This function is called before calling a <code class="docutils literal notranslate"><span class="pre">time_</span></code>
method and its execution time is not factored into the benchmarks.</p>
<p>Take for example the <code class="docutils literal notranslate"><span class="pre">ViewImageSuite</span></code> benchmark:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">napari</span>
<span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span>


<span class="k">class</span> <span class="nc">ViewImageSuite</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Benchmarks for viewing images in the viewer.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span> <span class="ow">or</span> <span class="n">QApplication</span><span class="p">([])</span>
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">teardown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">time_view_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Time to view an image.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, the creation of the image is completed in the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method, and not
included in the reported time of the benchmark.</p>
<p>It is also possible to benchmark features such as peak memory usage. To learn
more about the features of <code class="docutils literal notranslate"><span class="pre">asv</span></code>, please refer to the official
<a class="reference external" href="http://asv.readthedocs.io/en/latest/writing_benchmarks.html">airspeed velocity documentation</a>.</p>
</div>
<div class="section" id="testing-the-benchmarks-locally">
<h2>Testing the benchmarks locally<a class="headerlink" href="#testing-the-benchmarks-locally" title="Permalink to this headline">¶</a></h2>
<p>Prior to running the true benchmark, it is often worthwhile to test that the
code is free of typos. To do so, you may use the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv dev -b ViewImageSuite
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">ViewImageSuite</span></code> above will be run once in your current environment
to test that everything is in order.</p>
</div>
<div class="section" id="running-your-benchmark">
<h2>Running your benchmark<a class="headerlink" href="#running-your-benchmark" title="Permalink to this headline">¶</a></h2>
<p>The command above is fast, but doesn’t test the performance of the code
adequately. To do that you may want to run the benchmark in your current
environment to see the performance of your change as you are developing new
features. The command <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">run</span> <span class="pre">-E</span> <span class="pre">existing</span></code> will specify that you wish to run
the benchmark in your existing environment. This will save a significant amount
of time since building napari can be a time consuming task:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv run -E existing -b ViewImageSuite
</pre></div>
</div>
</div>
<div class="section" id="comparing-results-to-main">
<h2>Comparing results to main<a class="headerlink" href="#comparing-results-to-main" title="Permalink to this headline">¶</a></h2>
<p>Often, the goal of a PR is to compare the results of the modifications in terms
of speed to a snapshot of the code that is in the main branch of the
<code class="docutils literal notranslate"><span class="pre">napari</span></code> repository. The command <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">continuous</span></code> is of help here:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv continuous main your-current-branch -b ViewImageSuite
</pre></div>
</div>
<p>This call will build out the environments specified in the <code class="docutils literal notranslate"><span class="pre">asv.conf.json</span></code>
file and compare the performance of the benchmark between your current commit
and the code in the main branch.</p>
<p>The output may look something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ asv continuous main your-current-branch -b ViewImageSuite
· Creating environments
· Discovering benchmarks
·· Uninstalling from conda-py3.7-cython-numpy1.15-scipy
·· Installing 544c0fe3 &lt;benchmark_docs&gt; into conda-py3.7-cython-numpy1.15-scipy.
· Running <span class="m">4</span> total benchmarks <span class="o">(</span><span class="m">2</span> commits * <span class="m">2</span> environments * <span class="m">1</span> benchmarks<span class="o">)</span>
<span class="o">[</span>  <span class="m">0</span>.00%<span class="o">]</span> · For napari commit 37c764cb &lt;benchmark_docs~1&gt; <span class="o">(</span>round <span class="m">1</span>/2<span class="o">)</span>:
<span class="o">[</span>...<span class="o">]</span>
<span class="o">[</span><span class="m">100</span>.00%<span class="o">]</span> ··· ...Image.ViewImageSuite.time_view_image           <span class="m">33</span>.2±2ms

BENCHMARKS NOT SIGNIFICANTLY CHANGED.
</pre></div>
</div>
<p>In this case, the differences between HEAD on your-current-branch and main are not significant
enough for airspeed velocity to report.</p>
</div>
<div class="section" id="profiling">
<h2>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<p>The airspeed velocity tool also supports code profiling using <a class="reference external" href="https://docs.python.org/3/library/profile.html#module-cProfile"><code class="docutils literal notranslate"><span class="pre">cProfile</span></code></a>. For detailed instructions on how to use the profiling functionality see the
<a class="reference external" href="https://asv.readthedocs.io/en/stable/using.html#running-a-benchmark-in-the-profiler">asv profiling documentation</a>.</p>
<p>To profile a particular benchmark in napari you can run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv profile benchmark_qt_viewer.QtViewerSuite.time_create_viewer -g snakeviz --python<span class="o">=</span>same
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">benchmark_qt_viewer</span></code> is the file name, <code class="docutils literal notranslate"><span class="pre">QtViewerSuite</span></code> is the test suite class name,
and <code class="docutils literal notranslate"><span class="pre">time_create_viewer</span></code> is the test method.</p>
<p>To profile a particular parameterized benchmark you can run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>asv profile <span class="s2">&quot;benchmark_image_layer.Image2DSuite.time_create_layer\(512\)&quot;</span> -g snakeviz --python<span class="o">=</span>same
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">benchmark_image_layer</span></code> is the file name, <code class="docutils literal notranslate"><span class="pre">Image2DSuite</span></code> is the test suite class name,
and <code class="docutils literal notranslate"><span class="pre">time_to_create_layer</span></code> is the test method and <code class="docutils literal notranslate"><span class="pre">512</span></code> is a valid parameter input to the test method.</p>
<p>Note that we in both these cases we have sent the output of the profiling to <a class="reference external" href="http://jiffyclub.github.io/snakeviz/">snakeviz</a>
which you can pip install with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install snakeviz
</pre></div>
</div>
<p>and we use <code class="docutils literal notranslate"><span class="pre">--python=same</span></code> to profile against our current python environment.</p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Contributing resources</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="contributing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributing guide</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The napari team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>