
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profiling &#8212; napari</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release guide" href="release.html" />
    <link rel="prev" title="Core Developer guide" href="core_dev_guide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/logo.png" class="logo" alt="logo">
</a>


    
    <!-- A small template snippet for theme testing -->
<b>napari</b>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../plugins/index.html">
  Plugins
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../community/index.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://napari-hub.org">napari hub<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/napari/napari" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../community/mission_and_values.html">
   Mission and Values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/team.html">
   About the project and team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/code_of_conduct.html">
   Code of Conduct
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/code_of_conduct_reporting.html">
   Handling Code of Conduct reports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/governance.html">
   Governance model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/working_groups.html">
   Working groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community/meeting_schedule.html">
   Meeting schedule
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Contributing resources
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="benchmarks.html">
     Benchmarks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="contributing.html">
     Contributing guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="core_dev_guide.html">
     Core Developer guide
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Profiling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="release.html">
     Release guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="testing.html">
     Testing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="docs.html">
     Organization of Documentation for napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="translations.html">
     Translations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../release/index.html">
   Release notes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_14.html">
     napari 0.4.14
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_13.html">
     napari 0.4.13
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_12.html">
     napari 0.4.12
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_11.html">
     napari 0.4.11
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_10.html">
     napari 0.4.10
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_9.html">
     napari 0.4.9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_8.html">
     napari 0.4.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_7.html">
     napari 0.4.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_6.html">
     napari 0.4.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_5.html">
     napari 0.4.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_4.html">
     napari 0.4.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_3.html">
     napari 0.4.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_2.html">
     napari 0.4.2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_1.html">
     napari 0.4.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_4_0.html">
     napari 0.4.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_8.html">
     napari 0.3.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_7.html">
     napari 0.3.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_6.html">
     napari 0.3.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_5.html">
     napari 0.3.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_4.html">
     napari 0.3.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_3.html">
     napari 0.3.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_2.html">
     napari 0.3.2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_1.html">
     napari 0.3.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_3_0.html">
     napari 0.3.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_12.html">
     napari 0.2.12
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_11.html">
     napari 0.2.11
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_10.html">
     napari 0.2.10
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_9.html">
     napari 0.2.9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_8.html">
     napari 0.2.8
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_7.html">
     napari 0.2.7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_6.html">
     napari 0.2.6
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_5.html">
     napari 0.2.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_4.html">
     napari 0.2.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_3.html">
     napari 0.2.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_1.html">
     napari 0.2.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_2_0.html">
     napari 0.2.0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_5.html">
     napari 0.1.5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_3.html">
     napari 0.1.3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../release/release_0_1_0.html">
     napari 0.1.0
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../roadmaps/index.html">
   Roadmaps
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_4.html">
     Roadmap 0.4
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_3_retrospective.html">
     Roadmap 0.3 Retrospective
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../roadmaps/0_3.html">
     Roadmap 0.3
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="profiling">
<h1>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h1>
<p>In contrast to performance tracing, profiling does not provide information
about the timing of events, but instead provides combined information about the
total time of execution of each function. It also produces a call graph that
simplifies understanding the call relationship between functions.</p>
<p><img alt="Example part of execution graph" src="../_images/execution_graph.png" /></p>
<p>The basic tool for profile in Python is the built-in module <code class="docutils literal notranslate"><span class="pre">cProfile</span></code>.
To profile an entire script, use the call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m cProfile path_to_script.py
</pre></div>
</div>
<p>The output will be a table similar to this one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>         <span class="mi">2334264</span> <span class="n">function</span> <span class="n">calls</span> <span class="p">(</span><span class="mi">2267576</span> <span class="n">primitive</span> <span class="n">calls</span><span class="p">)</span> <span class="ow">in</span> <span class="mf">2.242</span> <span class="n">seconds</span>

   <span class="n">Ordered</span> <span class="n">by</span><span class="p">:</span> <span class="n">internal</span> <span class="n">time</span>

   <span class="n">ncalls</span>  <span class="n">tottime</span>  <span class="n">percall</span>  <span class="n">cumtime</span>  <span class="n">percall</span> <span class="n">filename</span><span class="p">:</span><span class="n">lineno</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
    <span class="mi">21241</span>    <span class="mf">0.252</span>    <span class="mf">0.000</span>    <span class="mf">0.252</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">method</span> <span class="s1">&#39;reduce&#39;</span> <span class="n">of</span> <span class="s1">&#39;numpy.ufunc&#39;</span> <span class="n">objects</span><span class="p">}</span>
<span class="mi">80547</span><span class="o">/</span><span class="mi">57578</span>    <span class="mf">0.080</span>    <span class="mf">0.000</span>    <span class="mf">0.765</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">method</span> <span class="n">numpy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">_multiarray_umath</span><span class="o">.</span><span class="n">implement_array_function</span><span class="p">}</span>
     <span class="mi">1048</span>    <span class="mf">0.060</span>    <span class="mf">0.000</span>    <span class="mf">0.060</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">method</span> <span class="n">marshal</span><span class="o">.</span><span class="n">loads</span><span class="p">}</span>
    <span class="mi">62683</span>    <span class="mf">0.052</span>    <span class="mf">0.000</span>    <span class="mf">0.052</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">method</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">}</span>
  <span class="mi">122</span><span class="o">/</span><span class="mi">117</span>    <span class="mf">0.042</span>    <span class="mf">0.000</span>    <span class="mf">0.047</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">method</span> <span class="n">_imp</span><span class="o">.</span><span class="n">create_dynamic</span><span class="p">}</span>
     <span class="mi">5152</span>    <span class="mf">0.042</span>    <span class="mf">0.000</span>    <span class="mf">0.053</span>    <span class="mf">0.000</span> <span class="n">stride_tricks</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">114</span><span class="p">(</span><span class="n">_broadcast_to</span><span class="p">)</span>
     <span class="mi">5102</span>    <span class="mf">0.037</span>    <span class="mf">0.000</span>    <span class="mf">0.048</span>    <span class="mf">0.000</span> <span class="n">decomp_qr</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">11</span><span class="p">(</span><span class="n">safecall</span><span class="p">)</span>
     <span class="mi">2551</span>    <span class="mf">0.031</span>    <span class="mf">0.000</span>    <span class="mf">0.386</span>    <span class="mf">0.000</span> <span class="n">transform_utils</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">153</span><span class="p">(</span><span class="n">decompose_linear_matrix</span><span class="p">)</span>
     <span class="mi">2651</span>    <span class="mf">0.029</span>    <span class="mf">0.000</span>    <span class="mf">0.067</span>    <span class="mf">0.000</span> <span class="n">transforms</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">342</span><span class="p">(</span><span class="fm">__call__</span><span class="p">)</span>
<span class="mi">2172</span><span class="o">/</span><span class="mi">2108</span>    <span class="mf">0.029</span>    <span class="mf">0.000</span>    <span class="mf">0.087</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">method</span> <span class="n">builtins</span><span class="o">.</span><span class="n">__build_class__</span><span class="p">}</span>
    <span class="mi">18283</span>    <span class="mf">0.027</span>    <span class="mf">0.000</span>    <span class="mf">0.278</span>    <span class="mf">0.000</span> <span class="n">fromnumeric</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">70</span><span class="p">(</span><span class="n">_wrapreduction</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The format of this table is documented in the Python docs
<a class="reference external" href="https://docs.python.org/3/library/profile.html#instant-user-s-manual">here</a>.
Because the output for complex programs such as napari can be very long,
we suggest piping output to <code class="docutils literal notranslate"><span class="pre">less</span></code>, or saving it to a file,
which can be investigated later. To save the output to file use the <code class="docutils literal notranslate"><span class="pre">-o</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m cProfile -o result.pstat path_to_script.py
</pre></div>
</div>
<p>Once the file is saved, you can investigate using free tools. Some options include:</p>
<ol>
<li><p>The Stat object.</p>
<p>You can parse the profile output using the <code class="docutils literal notranslate"><span class="pre">Stats</span></code> object from the <code class="docutils literal notranslate"><span class="pre">pstats</span></code> built-in library. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pstats</span> <span class="kn">import</span> <span class="n">Stats</span>
<span class="n">stat</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">(</span><span class="s2">&quot;path/to/result.pstat&quot;</span><span class="p">)</span>
<span class="n">stat</span><span class="o">.</span><span class="n">sort_stats</span><span class="p">(</span><span class="s2">&quot;tottime&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">print_stats</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can find more documentation about the Stats object in the Python documentation <a class="reference external" href="https://docs.python.org/3/library/profile.html#the-stats-class">here</a>.</p>
</li>
<li><p>Snakeviz.</p>
<p>Snakeviz is a third party library designed to visualize profiling output interactively.
You can install it with pip like any other Python library using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">snakeviz</span></code>.
This will provide the <code class="docutils literal notranslate"><span class="pre">snakeviz</span></code> command, which you can call to create an in-browser
visualization of your profiling data. Use the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>snakeviz path/to/result.pstat   
</pre></div>
</div>
<p>This should cause a new page to open in your browser with your profiling information.
You can read more about how to interpret this visualization on the
<a class="reference external" href="https://jiffyclub.github.io/snakeviz/">snakeviz homepage</a>.</p>
</li>
<li><p>gprof2dot</p>
<p>You can visualize the call graph with <a class="reference external" href="https://graphviz.org/"><code class="docutils literal notranslate"><span class="pre">graphviz</span></code></a>,
a third party graph visualization library.
You can install graphviz with system package managers:</p>
<ul class="simple">
<li><p>Ubuntu: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">graphviz</span></code></p></li>
<li><p>MacOS with brew: <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">graphviz</span></code></p></li>
<li><p>Windows with choco <code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">graphviz</span></code></p></li>
</ul>
<p>You can then use <code class="docutils literal notranslate"><span class="pre">gprof2dot</span></code>, a Python library, to convert the <code class="docutils literal notranslate"><span class="pre">.pstat</span></code>
statistics to a <code class="docutils literal notranslate"><span class="pre">.dot</span></code> graph file and use graphviz:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python -m gprof2dot -f pstats  -n <span class="m">5</span>  result.pstat -o result.dot
$ dot -Tpng -o result.png result.dot
</pre></div>
</div>
<p>If your shell supports piping, this can all be combined into one command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python -m gprof2dot -f pstats  -n <span class="m">5</span>  result.pstat -o <span class="p">|</span> dot -Tpng -o result.png
</pre></div>
</div>
</li>
<li><p>Some IDEs have built in profiling visualization tools. For example, PyCharm Professional, which is free for academics and open source maintainers, allows viewing <code class="docutils literal notranslate"><span class="pre">.pstat</span></code> files using Tools &gt; Open CProfile snapshot.</p></li>
</ol>
<p>cProfile also allows profiling only specific parts of the code.
You can restrict profiling to particular code sections using
<code class="docutils literal notranslate"><span class="pre">cProfile.Profile()</span></code> as a context manager:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cProfile</span>

<span class="k">with</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span> <span class="k">as</span> <span class="n">pr</span><span class="p">:</span>
    <span class="n">code_for_profile</span><span class="p">()</span>
<span class="n">pr</span><span class="o">.</span><span class="n">dump_stats</span><span class="p">(</span><span class="s2">&quot;result.pstat&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting profile can then be visualized using the above methods.</p>
<p>In some situations, you might want to profile code that needs
some preliminary steps to be performed in the viewer, which you
don’t want to measure. In this situation, you can create a
button to trigger profiling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">testing_fun</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span> <span class="k">as</span> <span class="n">pr</span><span class="p">:</span>
        <span class="n">code_for_profile</span><span class="p">()</span>
    <span class="n">pr</span><span class="o">.</span><span class="n">dump_stats</span><span class="p">(</span><span class="s2">&quot;camera_layers.pstat&quot;</span><span class="p">)</span>

<span class="n">testing_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Profile&quot;</span><span class="p">)</span>
<span class="n">testing_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">testing_fun</span><span class="p">)</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">add_dock_widget</span><span class="p">(</span><span class="n">testing_btn</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition to cProfile, third-party profilers are available in Python:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yappi</span></code> with support for multithreading</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vmprof</span></code></p></li>
</ul>
<p>Both can be installed with <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="core_dev_guide.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Core Developer guide</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="release.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Release guide</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The napari team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>