
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using the tracks layer &#8212; napari</title>
    
    <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
    <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using the vectors layer" href="vectors.html" />
    <link rel="prev" title="Using the surface layer" href="surface.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/logo.png" class="logo" alt="logo">
</a>


    
    <!-- A small template snippet for theme testing -->
<b>napari</b>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../plugins/index.html">
  Plugins
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../community/index.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://napari-hub.org">napari hub<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/napari/napari" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/start_index.html">
   Getting started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/fundamentals/installation.html">
     How to install napari on your machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/fundamentals/getting_started.html">
     Getting started with napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/fundamentals/viewer.html">
     napari viewer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/layers.html">
     Layers at a glance
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/index.html">
   napari tutorials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/segmentation/index.html">
     Segmentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/tracking/index.html">
     Tracking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/applications/annotate_points.html">
     Annotating videos with napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/applications/dask.html">
     Using Dask and napari to process &amp; view large datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/tracking/cell_tracking.html">
     Single cell tracking with napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/segmentation/annotate_segmentation.html">
     Annotating segmentation with text and bounding boxes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../further-resources/napari-workshops.html">
   napari workshops
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   How-to guides
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Using layers
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="image.html">
       Using the image layer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="labels.html">
       Using the labels layer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="points.html">
       Using the points layer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="shapes.html">
       Using the shapes layer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="surface.html">
       Using the surface layer
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Using the tracks layer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="vectors.html">
       Using the vectors layer
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../connecting_events.html">
     Hooking up your own events
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../napari_imageJ.html">
     napari + ImageJ how-to guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker.html">
     Napari in Docker
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../perfmon.html">
     Performance monitoring
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../guides/index.html">
   In-depth explanations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/magicgui.html">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       magicgui
      </span>
     </code>
     in napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/event_loop.html">
     An introduction to the event loop in napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/threading.html">
     Multithreading in napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/rendering-explanation.html">
     Rendering in napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/rendering.html">
     Asynchronous rendering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/performance.html">
     napari performance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/3D_interactivity.html">
     3D interactivity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/events_reference.html">
     Events reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/contexts_expressions.html">
     Contexts and Expressions in napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../guides/preferences.html">
     Preferences
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../further-resources/glossary.html">
   Glossary
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#when-to-use-the-tracks-layer">
   When to use the tracks layer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-simple-example">
   A simple example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arguments-of-view-tracks-and-add-tracks">
   Arguments of
   <code class="docutils literal notranslate">
    <span class="pre">
     view_tracks
    </span>
   </code>
   and
   <code class="docutils literal notranslate">
    <span class="pre">
     add_tracks
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tracks-data">
   Tracks data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tracks-graph">
   Tracks graph
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-the-tracks-properties-dictionary">
   Using the tracks properties dictionary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#d-rendering-of-tracks">
   3D rendering of tracks
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-track-width">
   Changing track width
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-tail-length">
   Changing tail length
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-the-track-color-with-properties">
   Setting the track color with properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#putting-it-all-together">
   Putting it all together
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="using-the-tracks-layer">
<h1>Using the tracks layer<a class="headerlink" href="#using-the-tracks-layer" title="Permalink to this headline">¶</a></h1>
<p>In this document, you will learn about the <code class="docutils literal notranslate"><span class="pre">napari</span></code> <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> layer, including
displaying tracks and defining relationships between tracks.</p>
<div class="section" id="when-to-use-the-tracks-layer">
<h2>When to use the tracks layer<a class="headerlink" href="#when-to-use-the-tracks-layer" title="Permalink to this headline">¶</a></h2>
<p>The tracks layer allows you to display trajectories in <code class="docutils literal notranslate"><span class="pre">nD+t</span></code> while visualizing
the recent history of the track via a fading tail.</p>
<p>Each track can have annotations associated with it using the <code class="docutils literal notranslate"><span class="pre">Tracks.properties</span></code>
dictionary. These properties can be used to set the colors of the tracks.</p>
<p>For example, when displaying tracks of different classes/types, one could
automatically set color the individual tracks by their respective class/type.</p>
</div>
<div class="section" id="a-simple-example">
<h2>A simple example<a class="headerlink" href="#a-simple-example" title="Permalink to this headline">¶</a></h2>
<p>You can create a new viewer and add a set of tracks in one go using the
<code class="docutils literal notranslate"><span class="pre">napari.view_tracks</span></code> method, or if you already have an existing viewer, you can
add tracks to it using <code class="docutils literal notranslate"><span class="pre">viewer.add_tracks</span></code>. The API of both methods is the same.</p>
<p>In this example of we will overlay some tracks on an image from the Hubble space
telescope:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">napari</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>

<span class="n">hubble_image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">hubble_deep_field</span><span class="p">()</span>

<span class="n">tracks_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_image</span><span class="p">(</span><span class="n">hubble_image</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">add_tracks</span><span class="p">(</span><span class="n">tracks_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tracks&#39;</span><span class="p">)</span>

<span class="n">napari</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="image: tracks simple demo" src="../../_images/tracks_simple_demo.gif" /></p>
</div>
<div class="section" id="arguments-of-view-tracks-and-add-tracks">
<h2>Arguments of <code class="docutils literal notranslate"><span class="pre">view_tracks</span></code> and <code class="docutils literal notranslate"><span class="pre">add_tracks</span></code><a class="headerlink" href="#arguments-of-view-tracks-and-add-tracks" title="Permalink to this headline">¶</a></h2>
<p>Both <code class="docutils literal notranslate"><span class="pre">view_tracks</span></code> and <code class="docutils literal notranslate"><span class="pre">add_tracks</span></code> have the following doc strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Parameters</span>
<span class="sd">----------</span>
<span class="sd">data : array (N, D+1)</span>
<span class="sd">    Coordinates for N points in D+1 dimensions. ID,T,(Z),Y,X. The first</span>
<span class="sd">    axis is the integer ID of the track. D is either 3 or 4 for planar</span>
<span class="sd">    or volumetric timeseries respectively.</span>
<span class="sd">properties : dict {str: array (N,)}, DataFrame</span>
<span class="sd">    Properties for each point. Each property should be an array of length N,</span>
<span class="sd">    where N is the number of points.</span>
<span class="sd">graph : dict {int: list}</span>
<span class="sd">    Graph representing associations between tracks. Dictionary defines the</span>
<span class="sd">    mapping between a track ID and the parents of the track. This can be</span>
<span class="sd">    one (the track has one parent, and the parent has &gt;=1 child) in the</span>
<span class="sd">    case of track splitting, or more than one (the track has multiple</span>
<span class="sd">    parents, but only one child) in the case of track merging.</span>
<span class="sd">    See examples/tracks_3d_with_graph.py</span>
<span class="sd">color_by: str</span>
<span class="sd">    Track property (from property keys) by which to color vertices.</span>
<span class="sd">tail_width : float</span>
<span class="sd">    Width of the track tails in pixels.</span>
<span class="sd">tail_length : float</span>
<span class="sd">    Length of the track tails in units of time.</span>
<span class="sd">colormap : str</span>
<span class="sd">    Default colormap to use to set vertex colors. Specialized colormaps,</span>
<span class="sd">    relating to specified properties can be passed to the layer via</span>
<span class="sd">    colormaps_dict.</span>
<span class="sd">colormaps_dict : dict {str: napari.utils.Colormap}</span>
<span class="sd">    Optional dictionary mapping each property to a colormap for that</span>
<span class="sd">    property. This allows each property to be assigned a specific colormap,</span>
<span class="sd">    rather than having a global colormap for everything.</span>
<span class="sd">name : str</span>
<span class="sd">    Name of the layer.</span>
<span class="sd">metadata : dict</span>
<span class="sd">    Layer metadata.</span>
<span class="sd">scale : tuple of float</span>
<span class="sd">    Scale factors for the layer.</span>
<span class="sd">translate : tuple of float</span>
<span class="sd">    Translation values for the layer.</span>
<span class="sd">opacity : float</span>
<span class="sd">    Opacity of the layer visual, between 0.0 and 1.0.</span>
<span class="sd">blending : str</span>
<span class="sd">    One of a list of preset blending modes that determines how RGB and</span>
<span class="sd">    alpha values of the layer visual get mixed. Allowed values are</span>
<span class="sd">    {&#39;opaque&#39;, &#39;translucent&#39;, and &#39;additive&#39;}.</span>
<span class="sd">visible : bool</span>
<span class="sd">    Whether the layer visual is currently being displayed.</span>

<span class="sd">Returns</span>
<span class="sd">-------</span>
<span class="sd">layer : napari.layers.Tracks</span>
<span class="sd">    The newly-created tracks layer.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tracks-data">
<h2>Tracks data<a class="headerlink" href="#tracks-data" title="Permalink to this headline">¶</a></h2>
<p>The input data to the tracks layer must be an <code class="docutils literal notranslate"><span class="pre">NxD+1</span></code> numpy array or list
containing the coordinates of <code class="docutils literal notranslate"><span class="pre">N</span></code> vertices with a track ID and coordinate in <code class="docutils literal notranslate"><span class="pre">D</span></code>
dimensions. The ordering of these dimensions is the same as the ordering of the
dimensions for image layers. This array is always accessible through the
<code class="docutils literal notranslate"><span class="pre">layer.data</span></code> property and will grow or shrink as new tracks are either added or
deleted.</p>
<p>Consider the set of 4D tracks data (time + 3 spatial dimensions) defined below.
The <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> layer assumes the first column is the <code class="docutils literal notranslate"><span class="pre">track_id</span></code>, the second column
is the time axis, and columns 3-5 are Z, Y, and X, respectively. Each row is one
vertex in a track. All vertices with the same <code class="docutils literal notranslate"><span class="pre">track_id</span></code> are joined into a
single track. In this case, we have defined 2 tracks: track 0, which goes from
<code class="docutils literal notranslate"><span class="pre">[10,</span> <span class="pre">10,</span> <span class="pre">10]</span></code> to <code class="docutils literal notranslate"><span class="pre">[20,</span> <span class="pre">10,</span> <span class="pre">10]</span></code> and track 1, which goes from <code class="docutils literal notranslate"><span class="pre">[10,</span> <span class="pre">8,</span> <span class="pre">5]</span></code> to
<code class="docutils literal notranslate"><span class="pre">[7,</span> <span class="pre">8,</span> <span class="pre">10]</span></code> (coordinates written as <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code>).</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>track_id</p></th>
<th class="head"><p>t</p></th>
<th class="head"><p>z</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>x</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>5</p></td>
<td><p>8</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>10</p></td>
<td><p>8</p></td>
<td><p>7</p></td>
</tr>
</tbody>
</table>
<p>The data in the array must be sorted by increasing <code class="docutils literal notranslate"><span class="pre">track_id</span></code> then time, as
shown above.  We can pass the example data above to the tracks layer as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">tracks_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_tracks</span><span class="p">(</span><span class="n">tracks_data</span><span class="p">)</span>
<span class="n">napari</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="tracks-graph">
<h2>Tracks graph<a class="headerlink" href="#tracks-graph" title="Permalink to this headline">¶</a></h2>
<p>We can use the tracks <code class="docutils literal notranslate"><span class="pre">graph</span></code> argument to define the relationships between
tracks (e.g., tracks merging or tracks splitting). The graph is defined as a
dictionary where the keys are the <code class="docutils literal notranslate"><span class="pre">track_id</span></code> and the values are the <code class="docutils literal notranslate"><span class="pre">track_id</span></code>
of the parents of the the key.</p>
<p>For example, if we have a track 0, which splits into tracks 1 and 2 (i.e., track
0 is the parent of tracks 1 and 2), we would define the graph as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If later tracks 1 and 2 merge into track 3 (i.e,. tracks 1 and 2 are the parent
of track 3), the dictionary would become</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For a full example of 3d+t tracks data with a parent graph, please see our
<a class="reference external" href="https://github.com/napari/napari/blob/main/examples/tracks_3d_with_graph.py"><code class="docutils literal notranslate"><span class="pre">tracks_3d_with_graph.py</span></code> example</a>.</p>
</div>
<div class="section" id="using-the-tracks-properties-dictionary">
<h2>Using the tracks properties dictionary<a class="headerlink" href="#using-the-tracks-properties-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> layer can contain properties that annotate the vertices of each
track. <code class="docutils literal notranslate"><span class="pre">Tracks.properties</span></code> stores the properties in a dictionary where each key
is the name of the property and the values are numpy arrays with a value for
each vertex in the track (i.e., length <code class="docutils literal notranslate"><span class="pre">N</span></code> for <code class="docutils literal notranslate"><span class="pre">N</span></code> vertices in <code class="docutils literal notranslate"><span class="pre">Tracks.data</span></code>).
As we will see below, we can use the values in a property to set the display
properties of the tracks (e.g., the track color).</p>
</div>
<div class="section" id="d-rendering-of-tracks">
<h2>3D rendering of tracks<a class="headerlink" href="#d-rendering-of-tracks" title="Permalink to this headline">¶</a></h2>
<p>All our layers can be rendered in both 2D and 3D mode, and one of our viewer
buttons can toggle between each mode. The number of dimensions sliders will be 2
or 3 less than the total number of dimensions of the layer.</p>
</div>
<div class="section" id="changing-track-width">
<h2>Changing track width<a class="headerlink" href="#changing-track-width" title="Permalink to this headline">¶</a></h2>
<p>We can specify the width of the tracks in pixels. The track width can be
specified via the <code class="docutils literal notranslate"><span class="pre">tail_width</span></code> keyword argument in the <code class="docutils literal notranslate"><span class="pre">viewer.add_tracks()</span></code> and
<code class="docutils literal notranslate"><span class="pre">napari.view_tracks()</span></code> methods. From a layer that as already been constructed,
we can set the track width via the <code class="docutils literal notranslate"><span class="pre">layer.tail_width</span></code> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a tracks layer with a tail width of 5 pixels</span>
<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_tracks</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tail_width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_tracks&quot;</span><span class="p">)</span>

<span class="c1"># update the tail width to 3 pixels</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;my_tracks&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tail_width</span> <span class="o">=</span> <span class="mi">3</span>

</pre></div>
</div>
<p>Additionally, we can adjust the width of the track in the GUI using the “tail width” slider in the Tracks layer controls.</p>
<p><img alt="image: tracks tail width" src="../../_images/tracks_tail_width.gif" /></p>
</div>
<div class="section" id="changing-tail-length">
<h2>Changing tail length<a class="headerlink" href="#changing-tail-length" title="Permalink to this headline">¶</a></h2>
<p>We can specify the length of the tails of the tracks in time units. The tail is the portion of the track displayed from previous time steps. The track tail length can be specified via the <code class="docutils literal notranslate"><span class="pre">tail_length</span> </code> keyword argument in the <code class="docutils literal notranslate"><span class="pre">viewer.add_tracks()</span></code> and <code class="docutils literal notranslate"><span class="pre">napari.view_tracks()</span></code> methods. From a layer that as already been constructed, we can set the track width via the <code class="docutils literal notranslate"><span class="pre">tail_length</span> </code> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a tracks layer with a tail length of 5 time units</span>
<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_tracks</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tail_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_tracks&quot;</span><span class="p">)</span>

<span class="c1"># update the tail width to 3 pixels</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s2">&quot;my_tracks&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tail_length</span> <span class="o">=</span> <span class="mi">3</span>

</pre></div>
</div>
<p>Additionally, we can adjust the width of the track in the GUI using the “tail length” slider in the Tracks layer controls.</p>
<p><img alt="image: tracks tail length" src="../../_images/tracks_tail_length.gif" /></p>
</div>
<div class="section" id="setting-the-track-color-with-properties">
<h2>Setting the track color with properties<a class="headerlink" href="#setting-the-track-color-with-properties" title="Permalink to this headline">¶</a></h2>
<p>We can color the tracks by mapping colors to the track properties defined in <code class="docutils literal notranslate"><span class="pre">Tracks.properties</span></code>. If we define properties and pass them via the properties keyword argument in the <code class="docutils literal notranslate"><span class="pre">viewer.add_tracks()</span></code> and <code class="docutils literal notranslate"><span class="pre">napari.view_tracks()</span></code> methods, we can then select the property we would like to color the tracks by in the “color by” dropdown menu in the <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> layer controls. We can additionally specify the colormap used to map the property value to color via the “colormap” dropdown menu.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">napari</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>

<span class="n">hubble_image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">hubble_deep_field</span><span class="p">()</span>

<span class="n">tracks_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">436</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">636</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
<span class="p">])</span>
<span class="n">track_confidence</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="p">[</span><span class="mf">0.9</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span><span class="o">*</span><span class="p">[</span><span class="mf">0.3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">])</span>
<span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">tracks_data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="n">track_confidence</span>
<span class="p">}</span>

<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_image</span><span class="p">(</span><span class="n">hubble_image</span><span class="p">)</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">add_tracks</span><span class="p">(</span><span class="n">tracks_data</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">)</span>
<span class="n">napari</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="image: tracks colored by properties" src="../../_images/tracks_color_by.gif" /></p>
</div>
<div class="section" id="putting-it-all-together">
<h2>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h2>
<p>Here you can see an example of 3D+t tracks. You can view the source code for this example <a class="reference external" href="https://github.com/napari/napari/blob/main/examples/tracks_3d.py">here</a></p>
<p><img alt="image: tracks 3D plus time" src="../../_images/tracks_3d_t.gif" /></p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="surface.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using the surface layer</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="vectors.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using the vectors layer</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The napari team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>